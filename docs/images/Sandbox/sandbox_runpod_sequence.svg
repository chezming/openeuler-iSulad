<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="661px" preserveAspectRatio="none" style="width:919px;height:661px;background:#FFFFFF;" version="1.1" viewBox="0 0 919 661" width="919px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="28" x2="28" y1="81.4883" y2="580.1465"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="188" x2="188" y1="81.4883" y2="580.1465"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="373" x2="373" y1="81.4883" y2="580.1465"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="581.5" x2="581.5" y1="81.4883" y2="580.1465"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="720.5" x2="720.5" y1="81.4883" y2="580.1465"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="872" x2="872" y1="81.4883" y2="580.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="5" y="78.5352">Client</text><ellipse cx="28" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M28,21.5 L28,48.5 M15,29.5 L41,29.5 M28,48.5 L15,63.5 M28,48.5 L41,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="5" y="592.6816">Client</text><ellipse cx="28" cy="604.1348" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M28,612.1348 L28,639.1348 M15,620.1348 L41,620.1348 M28,639.1348 L15,654.1348 M28,639.1348 L41,654.1348 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="254" x="61" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="240" x="68" y="70.5352">cri_pod_sandbox_manager_service</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="254" x="61" y="579.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="240" x="68" y="599.6816">cri_pod_sandbox_manager_service</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="325" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="332" y="70.5352">sandbox_cb</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="325" y="579.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="332" y="599.6816">sandbox_cb</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="523.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="530.5" y="70.5352">sandbox_store</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="523.5" y="579.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="530.5" y="599.6816">sandbox_store</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="649.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="656.5" y="70.5352">service_sandboxer</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="649.5" y="579.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="656.5" y="599.6816">service_sandboxer</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="832" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="839" y="70.5352">controller</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="832" y="579.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="839" y="599.6816">controller</text><polygon fill="#181818" points="176,108.7988,186,112.7988,176,116.7988,180,112.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="28" x2="182" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="35" y="108.0566">RunPodSandbox</text><polygon fill="#181818" points="361.5,138.1094,371.5,142.1094,361.5,146.1094,365.5,142.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="188" x2="367.5" y1="142.1094" y2="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="195" y="137.3672">allocate_id</text><polygon fill="#181818" points="199,167.4199,189,171.4199,199,175.4199,195,171.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="193" x2="372.5" y1="171.4199" y2="171.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="205" y="166.6777">sandbox-id</text><line style="stroke:#181818;stroke-width:1.0;" x1="188" x2="230" y1="200.7305" y2="200.7305"/><line style="stroke:#181818;stroke-width:1.0;" x1="230" x2="230" y1="200.7305" y2="213.7305"/><line style="stroke:#181818;stroke-width:1.0;" x1="189" x2="230" y1="213.7305" y2="213.7305"/><polygon fill="#181818" points="199,209.7305,189,213.7305,199,217.7305,195,213.7305" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="195" y="195.9883">SetupPodSandboxNetwork</text><polygon fill="#181818" points="361.5,239.041,371.5,243.041,361.5,247.041,365.5,243.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="188" x2="367.5" y1="243.041" y2="243.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="195" y="238.2988">create</text><line style="stroke:#181818;stroke-width:1.0;" x1="373.5" x2="415.5" y1="272.3516" y2="272.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="415.5" x2="415.5" y1="272.3516" y2="285.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="374.5" x2="415.5" y1="285.3516" y2="285.3516"/><polygon fill="#181818" points="384.5,281.3516,374.5,285.3516,384.5,289.3516,380.5,285.3516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="380.5" y="267.6094">prepare_sandbox_environment</text><line style="stroke:#181818;stroke-width:1.0;" x1="373.5" x2="415.5" y1="314.6621" y2="314.6621"/><line style="stroke:#181818;stroke-width:1.0;" x1="415.5" x2="415.5" y1="314.6621" y2="327.6621"/><line style="stroke:#181818;stroke-width:1.0;" x1="374.5" x2="415.5" y1="327.6621" y2="327.6621"/><polygon fill="#181818" points="384.5,323.6621,374.5,327.6621,384.5,331.6621,380.5,327.6621" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="380.5" y="309.9199">init_sandbox_network_confs</text><polygon fill="#181818" points="569.5,352.9727,579.5,356.9727,569.5,360.9727,573.5,356.9727" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="373.5" x2="575.5" y1="356.9727" y2="356.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="380.5" y="352.2305">sandboxes_store_add</text><polygon fill="#181818" points="708.5,382.2832,718.5,386.2832,708.5,390.2832,712.5,386.2832" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="373.5" x2="714.5" y1="386.2832" y2="386.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="380.5" y="381.541">start_sandbox</text><polygon fill="#181818" points="860.5,411.5938,870.5,415.5938,860.5,419.5938,864.5,415.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="720.5" x2="866.5" y1="415.5938" y2="415.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="727.5" y="410.8516">sandbox_ctrl_start</text><polygon fill="#181818" points="860.5,440.9043,870.5,444.9043,860.5,448.9043,864.5,444.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="720.5" x2="866.5" y1="444.9043" y2="444.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="727.5" y="440.1621">sandbox_ctrl_status</text><polygon fill="#181818" points="731.5,470.2148,721.5,474.2148,731.5,478.2148,727.5,474.2148" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="725.5" x2="871.5" y1="474.2148" y2="474.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="737.5" y="469.4727">ready</text><polygon fill="#181818" points="384.5,499.5254,374.5,503.5254,384.5,507.5254,380.5,503.5254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="378.5" x2="719.5" y1="503.5254" y2="503.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="390.5" y="498.7832">ok</text><polygon fill="#181818" points="199,528.8359,189,532.8359,199,536.8359,195,532.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="193" x2="372.5" y1="532.8359" y2="532.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="205" y="528.0938">sandbox-id</text><polygon fill="#181818" points="39,558.1465,29,562.1465,39,566.1465,35,562.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="33" x2="187" y1="562.1465" y2="562.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="45" y="557.4043">sandbox-id</text><!--MD5=[fcff6db1c34803a2879c161f6368c9ce]
@startuml
actor Client as criClient
participant cri_pod_sandbox_manager_service as criServer

criClient -> criServer: RunPodSandbox
criServer -> sandbox_cb: allocate_id
criServer <- - sandbox_cb: sandbox-id
criServer -> criServer: SetupPodSandboxNetwork
criServer -> sandbox_cb: create
sandbox_cb -> sandbox_cb: prepare_sandbox_environment
sandbox_cb -> sandbox_cb: init_sandbox_network_confs
sandbox_cb -> sandbox_store: sandboxes_store_add
sandbox_cb -> service_sandboxer: start_sandbox
service_sandboxer -> controller: sandbox_ctrl_start
service_sandboxer -> controller: sandbox_ctrl_status
service_sandboxer <- - controller: ready
sandbox_cb <- - service_sandboxer: ok
criServer <- - sandbox_cb: sandbox-id
criClient <- - criServer: sandbox-id
@enduml

PlantUML version 1.2022.7(Tue Aug 23 01:01:30 CST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CN
--></g></svg>