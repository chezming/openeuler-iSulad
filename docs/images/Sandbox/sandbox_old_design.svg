<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1193px" preserveAspectRatio="none" style="width:660px;height:1193px;background:#FFFFFF;" version="1.1" viewBox="0 0 660 1193" width="660px" zoomAndPan="magnify"><defs/><g><!--MD5=[92bff4a90067656020f4b60af8c1ba63]
cluster iSulad--><g id="cluster_iSulad"><path d="M8.5,6 L53.5,6 A3.75,3.75 0 0 1 56,8.5 L63,28.4883 L650.5,28.4883 A2.5,2.5 0 0 1 653,30.9883 L653,1059.5 A2.5,2.5 0 0 1 650.5,1062 L8.5,1062 A2.5,2.5 0 0 1 6,1059.5 L6,8.5 A2.5,2.5 0 0 1 8.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="63" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="44" x="10" y="21.5352">iSulad</text></g><!--MD5=[1ff241b9a785a59cfb85bad121820e27]
cluster daemon/module/runtime--><g id="cluster_daemon/module/runtime"><rect fill="none" height="97" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="200" x="119" y="941"/><rect fill="none" height="10" style="stroke:#181818;stroke-width:1.0;" width="15" x="299" y="946"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="297" y="948"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="297" y="952"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="184" x="127" y="967.5352">daemon/module/runtime</text></g><!--MD5=[cc06c4108cdaaabefa9339fb784bcac9]
cluster daemon/module/service--><g id="cluster_daemon/module/service"><rect fill="none" height="97" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="193" x="169" y="676"/><rect fill="none" height="10" style="stroke:#181818;stroke-width:1.0;" width="15" x="342" y="681"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="340" y="683"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="340" y="687"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="177" x="177" y="702.5352">daemon/module/service</text></g><!--MD5=[14bd5b9338191d3422b2005ae967ac2c]
cluster daemon/executor--><g id="cluster_daemon/executor"><rect fill="none" height="97" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="160" x="185" y="411"/><rect fill="none" height="10" style="stroke:#181818;stroke-width:1.0;" width="15" x="325" y="416"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="323" y="418"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="323" y="422"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="126" x="202" y="437.5352">daemon/executor</text></g><!--MD5=[ce6d86842c0a51ad1714aaf525cfb283]
cluster daemon/entry/cri--><g id="cluster_daemon/entry/cri"><rect fill="none" height="97" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="599" x="30" y="146"/><rect fill="none" height="10" style="stroke:#181818;stroke-width:1.0;" width="15" x="609" y="151"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="607" y="153"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="607" y="157"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="128" x="265.5" y="172.5352">daemon/entry/cri</text></g><!--MD5=[315078d1d33eb31893c8ebbc2d213676]
entity CRIP--><g id="elem_CRIP"><ellipse cx="473" cy="70" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="431" y="100.5352">CRI Pod RPC</text></g><!--MD5=[18b73aa5e56ebcb8293fe399ae7faa05]
entity CRIC--><g id="elem_CRIC"><ellipse cx="172" cy="70" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="109" y="100.5352">CRI Container RPC</text></g><!--MD5=[7dff9a2847848addf094a9df6fba4d5b]
entity CCB--><g id="elem_CCB"><ellipse cx="265" cy="335" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="200" y="365.5352">Container Callback</text></g><!--MD5=[c03d6e8c9ffa46d8851c0ec00a5d4416]
entity CLC--><g id="elem_CLC"><ellipse cx="265" cy="600" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="200.5" y="630.5352">Container Lifecycle</text></g><!--MD5=[0cb2357f9066fcf3d3cc5d6a6b2944cc]
entity SHIMV2--><g id="elem_SHIMV2"><ellipse cx="265" cy="865" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="205.5" y="895.5352">Runtime Callback</text></g><g id="elem_GMN21"><path d="M336.5,978.5 L336.5,995 L301.79,999 L336.5,1003 L336.5,1019.1211 A0,0 0 0 0 336.5,1019.1211 L485.5,1019.1211 A0,0 0 0 0 485.5,1019.1211 L485.5,988.5 L475.5,978.5 L336.5,978.5 A0,0 0 0 0 336.5,978.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M475.5,978.5 L475.5,988.5 L485.5,988.5 L475.5,978.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="342.5" y="996.0684">shim component</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="342.5" y="1011.3789">implements shim v2</text></g><!--MD5=[c0ac361c08dad0d2b989eed26ad6b5f7]
entity shim--><g id="elem_shim"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="228.5" y="976"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="281.5" y="981"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="279.5" y="983"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="279.5" y="987"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="243.5" y="1009.5352">shim</text></g><!--MD5=[dc41b8b88608632cfe780f493fc77aa2]
entity service_container--><g id="elem_service_container"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159" x="185.5" y="711"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="324.5" y="716"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="322.5" y="718"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="322.5" y="722"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="200.5" y="744.5352">service_container</text></g><!--MD5=[54dc600cbf5b156e84bf83bd7c737d72]
entity container_cb--><g id="elem_container_cb"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="201" y="446"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="309" y="451"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="307" y="453"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="307" y="457"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="216" y="479.5352">container_cb</text></g><!--MD5=[dba07933f52666320b15e8f3d5bf0ff9]
entity cri_pod_sandbox_manager_service--><g id="elem_cri_pod_sandbox_manager_service"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="280" x="333" y="181"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="593" y="186"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="591" y="188"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="591" y="192"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="240" x="348" y="214.5352">cri_pod_sandbox_manager_service</text></g><!--MD5=[524f11b53c706018cbbc1002e9926cd4]
entity cri_container_manager_service--><g id="elem_cri_container_manager_service"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="251" x="46.5" y="181"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="277.5" y="186"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="275.5" y="188"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="275.5" y="192"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="211" x="61.5" y="214.5352">cri_container_manager_service</text></g><!--MD5=[88aa61d25e15af0cb62a850685a79432]
entity SHIMV2RPC--><g id="elem_SHIMV2RPC"><ellipse cx="265" cy="1154" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="222.5" y="1184.5352">Shim v2 RPC</text></g><!--MD5=[e83e31a38be3700e70b6fd5e180e278d]
link SHIMV2 to shim--><g id="link_SHIMV2_shim"><path d="M265,873.86 C265,893.57 265,945.62 265,975.7 " fill="none" id="SHIMV2-shim" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[43469bd396e4edf7406d103d3f5fc745]
link shim to SHIMV2RPC--><g id="link_shim_SHIMV2RPC"><path d="M265,1022.25 C265,1054.47 265,1113.16 265,1139.53 " fill="none" id="shim-to-SHIMV2RPC" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="265,1144.22,269,1135.22,265,1139.22,261,1135.22,265,1144.22" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="266" y="1091.5684">use</text></g><!--MD5=[1e5c813b900984f328b8c3d7437162fe]
link CLC to service_container--><g id="link_CLC_service_container"><path d="M265,608.86 C265,628.57 265,680.62 265,710.7 " fill="none" id="CLC-service_container" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4df44312146a6229df81178f2a36ba78]
link service_container to SHIMV2--><g id="link_service_container_SHIMV2"><path d="M265,757.47 C265,784.28 265,828.24 265,850.37 " fill="none" id="service_container-to-SHIMV2" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="265,855.24,269.0257,846.2515,265.0143,850.24,261.0257,846.2286,265,855.24" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="266" y="802.5684">use</text></g><!--MD5=[26156a7a01ea5196d475614815922760]
link CCB to container_cb--><g id="link_CCB_container_cb"><path d="M265,343.86 C265,363.57 265,415.62 265,445.7 " fill="none" id="CCB-container_cb" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[d30d446fccc63014a95803df4ea43940]
link container_cb to CLC--><g id="link_container_cb_CLC"><path d="M265,492.47 C265,519.28 265,563.24 265,585.37 " fill="none" id="container_cb-to-CLC" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="265,590.24,269.0257,581.2515,265.0143,585.24,261.0257,581.2286,265,590.24" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="266" y="537.5684">use</text></g><!--MD5=[0fecdfc7ff2a9ccc4b2ec67bb5610ce5]
link CRIP to cri_pod_sandbox_manager_service--><g id="link_CRIP_cri_pod_sandbox_manager_service"><path d="M473,78.86 C473,98.57 473,150.62 473,180.7 " fill="none" id="CRIP-cri_pod_sandbox_manager_service" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[2609ac80d0bf40fb235640331493ba80]
link cri_pod_sandbox_manager_service to CCB--><g id="link_cri_pod_sandbox_manager_service_CCB"><path d="M436.77,227.47 C389.9,256.54 310.5,305.78 278.73,325.48 " fill="none" id="cri_pod_sandbox_manager_service-to-CCB" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="274.71,328.6,284.4661,327.2515,278.958,325.9628,280.2466,320.4547,274.71,328.6" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="382" y="272.5684">use</text></g><!--MD5=[344ab20247dde2b2ee286485ee3a187e]
link CRIC to cri_container_manager_service--><g id="link_CRIC_cri_container_manager_service"><path d="M172,78.86 C172,98.57 172,150.62 172,180.7 " fill="none" id="CRIC-cri_container_manager_service" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[7a1cb736744087b4a79f4ae3a2715a23]
link cri_container_manager_service to CCB--><g id="link_cri_container_manager_service_CCB"><path d="M188.2,227.47 C207.86,254.74 240.31,299.75 255.98,321.49 " fill="none" id="cri_container_manager_service-to-CCB" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="259.41,325.24,257.392,315.6001,256.4862,321.184,250.9023,320.2782,259.41,325.24" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="222" y="272.5684">use</text></g><!--MD5=[724315f1d31f399bfbbb7789c8ea0db9]
@startuml

interface "Shim v2 RPC" as SHIMV2RPC

package "iSulad" {
    interface "CRI Pod RPC" as CRIP
    interface "CRI Container RPC" as CRIC

    interface "Container Callback" as CCB

    interface "Container Lifecycle" as CLC

    interface "Runtime Callback" as SHIMV2

    component "daemon/module/runtime" {
        component shim
        SHIMV2 - - [shim]
        [shim] ..> SHIMV2RPC: use
    }
    note left of shim
        shim component
        implements shim v2
    end note

    component "daemon/module/service" {
        component service_container
        CLC - - [service_container]
        [service_container] ..> SHIMV2: use
    }

    component "daemon/executor" {
        component container_cb
        CCB - - [container_cb]
        [container_cb] ..> CLC: use
    }

    component "daemon/entry/cri" {
        component cri_pod_sandbox_manager_service
        CRIP - - [cri_pod_sandbox_manager_service]
        [cri_pod_sandbox_manager_service] ..> CCB: use
        CRIC - - [cri_container_manager_service]
        [cri_container_manager_service] ..> CCB: use
    }
}

@enduml

PlantUML version 1.2022.7(Tue Aug 23 01:01:30 CST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CN
--></g></svg>